{"ast":null,"code":"var _jsxFileName = \"/Users/kristina/Desktop/experis/week_9/realtor/src/pages/search/gallery.jsx\";\nimport React from 'react';\nimport Card from \"../../components/card/card.jsx\";\nimport Filters from \"./filters/filters\";\nimport api from \"../../server_api/api\";\nimport Pagination from \"../../components/pagination/pagination\";\n\nclass Gallery extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.pageHandelClick = page => {\n      this.setState({\n        page: page\n      });\n      console.log(this.state.filtered);\n    };\n\n    this.updateGalleryItems = data => {\n      if (data.minPrice) {\n        data.minPrice = this.data_price_multiplication(data.minPrice);\n      }\n\n      if (data.maxPrice) {\n        data.maxPrice = this.data_price_multiplication(data.maxPrice);\n      }\n\n      data = this.dataToString(data);\n      this.setState({\n        filtered: data\n      });\n      this.setState({\n        apartments: this.state.apartments\n      }, () => this.getdata());\n    };\n\n    this.data_price_multiplication = price => {\n      if (price && typeof price !== \"number\") {\n        let multiplication_price_max = price.slice(-1);\n\n        if (multiplication_price_max === \"k\") {\n          price = parseFloat(price.slice(1, -1)) * 1000;\n        } else if (multiplication_price_max === \"M\") {\n          price = parseFloat(price.slice(1, -1)) * 1000000;\n        }\n      }\n\n      return price;\n    };\n\n    this.allApartments = () => {\n      this.setState({\n        filtered: \"\"\n      }, () => {\n        this.getdata();\n      });\n    };\n\n    this.state = {\n      len_apartments: 0,\n      page: 1,\n      apartments: [],\n      filtered: \"page=1&\",\n      countries: []\n    };\n  }\n\n  // async componentWillMount() {\n  //     const data = await api.getLengthApartmentsArray();\n  //     this.setState({\n  //         len_apartments: data.length.length,\n  //     });\n  //     console.log(this.state.len_apartments);\n  // }\n  async componentDidMount() {\n    const data = await this.getdata();\n    let countries_array = [];\n    data.data.apartments.map(item => {\n      return countries_array.push(item.country);\n    });\n    this.setState({\n      countries: Array.from(new Set(countries_array))\n    });\n  }\n\n  async getdata() {\n    const data = await api.getfilteredApartments(this.state.filtered);\n    this.setState({\n      apartments: data.data.apartments\n    });\n    this.setState({\n      len_apartments: this.state.apartments.length\n    });\n    console.log(this.state.len_apartments);\n    return data;\n  }\n\n  dataToString(data) {\n    let str = \"\";\n\n    for (let prop in data) {\n      str += prop + '=';\n      str += data[prop] + '&';\n    }\n\n    return str;\n  }\n\n  render() {\n    const apartments = this.state.apartments;\n    console.log(\"ferwregregvreg\", apartments.slice(this.state.page - 1 * 12));\n    return React.createElement(\"div\", {\n      style: {\n        overflow: \"hidden\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(Filters, {\n      updateGalleryItems: this.updateGalleryItems,\n      countries: this.state.countries,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    })), apartments.length ? React.createElement(\"div\", {\n      className: \"row m-0 d-flex justify-content-around\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, apartments.slice(this.state.page - 1 * 12).map((item, i) => {\n      return React.createElement(Card, Object.assign({}, item, {\n        type: this.props.type,\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }));\n    }), React.createElement(Pagination, {\n      len_apartments: this.state.len_apartments,\n      pageHandelClick: this.pageHandelClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    })) : React.createElement(\"div\", {\n      className: \"d-none d-lg-flex no_filters\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.allApartments,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"no filtered apartments is available\")));\n  }\n\n}\n\nexport default Gallery;","map":{"version":3,"sources":["/Users/kristina/Desktop/experis/week_9/realtor/src/pages/search/gallery.jsx"],"names":["React","Card","Filters","api","Pagination","Gallery","Component","constructor","props","pageHandelClick","page","setState","console","log","state","filtered","updateGalleryItems","data","minPrice","data_price_multiplication","maxPrice","dataToString","apartments","getdata","price","multiplication_price_max","slice","parseFloat","allApartments","len_apartments","countries","componentDidMount","countries_array","map","item","push","country","Array","from","Set","getfilteredApartments","length","str","prop","render","overflow","i","type"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Card from \"../../components/card/card.jsx\";\nimport Filters from \"./filters/filters\";\nimport api from \"../../server_api/api\";\nimport Pagination from \"../../components/pagination/pagination\";\n\nclass Gallery extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            len_apartments: 0,\n            page: 1,\n            apartments: [],\n            filtered: \"page=1&\",\n            countries: [],\n\n        }\n    };\n\n    // async componentWillMount() {\n    //     const data = await api.getLengthApartmentsArray();\n    //     this.setState({\n    //         len_apartments: data.length.length,\n    //     });\n    //     console.log(this.state.len_apartments);\n    // }\n\n\n    async componentDidMount(){\n        const data = await this.getdata();\n        let countries_array= [];\n        data.data.apartments.map(item => {return countries_array.push(item.country)});\n        this.setState({\n            countries: Array.from(new Set(countries_array)),\n        });\n    }\n\n    async getdata(){\n        const data = await api.getfilteredApartments(this.state.filtered);\n        this.setState({\n            apartments:data.data.apartments,\n        });\n        this.setState({\n            len_apartments: this.state.apartments.length,\n        });\n        console.log(this.state.len_apartments);\n        return data\n    }\n\n    pageHandelClick = (page) => {\n        this.setState({\n            page: page,\n        });\n\n        console.log(this.state.filtered);\n    };\n\n    updateGalleryItems  = (data) => {\n\n       if(data.minPrice){\n           data.minPrice = this.data_price_multiplication(data.minPrice);\n       }\n       if(data.maxPrice){\n            data.maxPrice = this.data_price_multiplication(data.maxPrice);\n       }\n\n       data = this.dataToString(data);\n\n        this.setState({\n            filtered: data,\n        });\n        this.setState({\n            apartments: this.state.apartments,\n        }, () => this.getdata());\n    };\n\n    data_price_multiplication = (price) => {\n        if (price && typeof price !== \"number\") {\n            let multiplication_price_max = price.slice(-1);\n\n            if (multiplication_price_max === \"k\") {\n                price = parseFloat(price.slice(1,-1)) * 1000;\n            } else if (multiplication_price_max === \"M\") {\n                price = parseFloat(price.slice(1,-1)) * 1000000;\n            }\n        }\n        return price;\n    };\n\n\n    dataToString(data) {\n        let str = \"\";\n        for (let prop in data) {\n            str += prop + '=';\n            str += data[prop] + '&'\n        }\n        return str;\n    }\n\n    allApartments = () => {\n        this.setState({\n            filtered: \"\",\n        }, () => {this.getdata()})\n    };\n\n    render() {\n        const {apartments} = this.state;\n        console.log(\"ferwregregvreg\", apartments.slice(this.state.page-1*12));\n        return (\n            <div style={{overflow:\"hidden\"}}>\n                <div>\n                    <Filters updateGalleryItems={this.updateGalleryItems} countries={this.state.countries} />\n                </div>\n\n                {apartments.length ?\n                    <div className={\"row m-0 d-flex justify-content-around\"}>\n                        {apartments.slice(this.state.page-1*12).map((item, i) => {\n                            return (\n                                <Card {...item} type={this.props.type} key={i}/>\n                            )\n                        })}\n\n                        <Pagination len_apartments={this.state.len_apartments} pageHandelClick={this.pageHandelClick}/>\n                    </div>\n                :\n                    <div className={\"d-none d-lg-flex no_filters\"}>\n                        <button  onClick={this.allApartments}>no filtered apartments is available</button>\n                    </div>\n                }\n            </div>\n        )\n    }\n}\n\n\nexport default Gallery;\n"]},"metadata":{},"sourceType":"module"}