{"ast":null,"code":"var _jsxFileName = \"/Users/kristina/Desktop/experis/week_9/realtor/src/pages/search/gallery.jsx\";\nimport React from 'react';\nimport Card from \"../../components/card/card.jsx\";\nimport Filters from \"./filters\";\nimport axios from \"axios\";\n\nclass Gallery extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apartments: [],\n      filtered: \"\",\n      cities: this.props.cities\n    };\n  }\n\n  componentDidMount() {\n    this.getdata();\n  }\n\n  async getdata() {\n    const data = await axios.get(\"http://localhost:5000/apartments?\".concat(this.state.filtered));\n    this.setState({\n      apartments: data.data.apartments\n    });\n    console.log(this.state.apartments);\n  } // checkRange = ( value, min, max, label) => {\n  //     let cur_val = value[label];\n  //     if (label === 'price') {\n  //         cur_val = value[label]*100000;\n  //     }\n  //     min = (min === undefined || min === \"\") ?  0 : min;\n  //     max = (max === undefined || max === \"\") ?  Infinity : max;\n  //\n  //     return (cur_val >= min && cur_val <= max);\n  // };\n  //\n  // data_price_multiplication = (price) => {\n  //     if (price && typeof price !== \"number\") {\n  //         let multiplication_price_max = price.slice(-1);\n  //\n  //         if (multiplication_price_max === \"k\") {\n  //             price = parseInt(price.slice(1)) * 1000;\n  //         } else if (multiplication_price_max === \"M\") {\n  //             price = parseInt(price.slice(1)) * 1000000;\n  //         }\n  //     }\n  //     return price;\n  // };\n  // updateGalleryItems  = (data) => {\n  //         this.setState({\n  //             filtered: data,\n  //         }, () => this.getdata());\n  //     console.log(data);\n  //\n  // let {cities, apartments, } = this.state;\n  // let temp = this.state.apartments;\n  // let new_apartments = [];\n  //\n  //\n  // new_apartments = temp.filter(function (apartment) {\n  //                 const city = cities.find(city => city.id === apartment.cityId);\n  //                 const city_name = city.label;\n  //                 if (city_name.toLowerCase().includes(data.city.toLowerCase())){ return apartment}\n  //             });\n  //\n  // if (data.price_min || data.price_max) {\n  //     data.price_min = this.data_price_multiplication(data.price_min);\n  //     data.price_max = this.data_price_multiplication(data.price_max);\n  //\n  //     if (data.price_max || data.price_min) {\n  //         new_apartments = new_apartments.filter(obj => this.checkRange(obj, data.price_min , data.price_max , \"price\"))\n  //     }\n  // }\n  // if (data.bed_min || data.bed_max) {\n  //     new_apartments = new_apartments.filter (obj => this.checkRange(obj, data.bed_min, data.bed_max, \"number_of_beds\"))\n  // }\n  // if (data.room_min || data.room_max) {\n  //     new_apartments = new_apartments.filter(obj => this.checkRange(obj, data.room_min, data.room_max, \"number_of_rooms\"))\n  // }\n  // if (data.no_filters){\n  //         new_apartments = temp;\n  // }\n  // this.setState({filtered:new_apartments})\n  // };\n\n\n  render() {\n    const _this$state = this.state,\n          cities = _this$state.cities,\n          filtered = _this$state.filtered,\n          apartments = _this$state.apartments;\n\n    const buildSquareDetails = () => {\n      return apartments.map((item, i) => {\n        return React.createElement(Card, Object.assign({}, item, {\n          cities: cities,\n          type: this.props.type,\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }));\n      });\n    };\n\n    return React.createElement(\"div\", {\n      style: {\n        overflow: \"hidden\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(Filters, {\n      updateGalleryItems: this.updateGalleryItems,\n      filtered: this.state.filtered,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"row m-0 d-flex justify-content-around\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, buildSquareDetails()));\n  }\n\n}\n\nexport default Gallery;","map":{"version":3,"sources":["/Users/kristina/Desktop/experis/week_9/realtor/src/pages/search/gallery.jsx"],"names":["React","Card","Filters","axios","Gallery","Component","constructor","props","state","apartments","filtered","cities","componentDidMount","getdata","data","get","setState","console","log","render","buildSquareDetails","map","item","i","type","overflow","updateGalleryItems"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,gCAAjB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,OAAN,SAAsBJ,KAAK,CAACK,SAA5B,CAAsC;AAClCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,UAAU,EAAE,EADH;AAETC,MAAAA,QAAQ,EAAE,EAFD;AAGTC,MAAAA,MAAM,EAAE,KAAKJ,KAAL,CAAWI;AAHV,KAAb;AAKH;;AAEDC,EAAAA,iBAAiB,GAAE;AACf,SAAKC,OAAL;AACH;;AAED,QAAMA,OAAN,GAAe;AACX,UAAMC,IAAI,GAAG,MAAMX,KAAK,CAACY,GAAN,4CAA8C,KAAKP,KAAL,CAAWE,QAAzD,EAAnB;AACA,SAAKM,QAAL,CAAc;AAACP,MAAAA,UAAU,EAACK,IAAI,CAACA,IAAL,CAAUL;AAAtB,KAAd;AACAQ,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKV,KAAL,CAAWC,UAAvB;AACH,GAlBiC,CAoBlC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACJ;;;AAGAU,EAAAA,MAAM,GAAG;AAAA,wBACoC,KAAKX,KADzC;AAAA,UACGG,MADH,eACGA,MADH;AAAA,UACWD,QADX,eACWA,QADX;AAAA,UACqBD,UADrB,eACqBA,UADrB;;AAEL,UAAMW,kBAAkB,GAAG,MAAM;AAC7B,aAAOX,UAAU,CAACY,GAAX,CAAe,CAACC,IAAD,EAAOC,CAAP,KAAa;AAC/B,eACI,oBAAC,IAAD,oBAAUD,IAAV;AAAgB,UAAA,MAAM,EAAEX,MAAxB;AAAgC,UAAA,IAAI,EAAE,KAAKJ,KAAL,CAAWiB,IAAjD;AAAuD,UAAA,GAAG,EAAED,CAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADJ;AAGH,OAJM,CAAP;AAKH,KAND;;AAQA,WACI;AAAK,MAAA,KAAK,EAAE;AAACE,QAAAA,QAAQ,EAAC;AAAV,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,OAAD;AAAS,MAAA,kBAAkB,EAAE,KAAKC,kBAAlC;AAAsD,MAAA,QAAQ,EAAE,KAAKlB,KAAL,CAAWE,QAA3E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,EAKI;AAAK,MAAA,SAAS,EAAE,uCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKU,kBAAkB,EADvB,CALJ,CADJ;AAWH;;AAzGiC;;AA6GtC,eAAehB,OAAf","sourcesContent":["import React from 'react';\nimport Card from \"../../components/card/card.jsx\";\nimport Filters from \"./filters\";\nimport axios from \"axios\";\n\nclass Gallery extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            apartments: [],\n            filtered: \"\",\n            cities: this.props.cities\n        }\n    };\n\n    componentDidMount(){\n        this.getdata();\n    }\n\n    async getdata(){\n        const data = await axios.get(`http://localhost:5000/apartments?${this.state.filtered}`);\n        this.setState({apartments:data.data.apartments});\n        console.log(this.state.apartments)\n    }\n\n    // checkRange = ( value, min, max, label) => {\n    //     let cur_val = value[label];\n    //     if (label === 'price') {\n    //         cur_val = value[label]*100000;\n    //     }\n    //     min = (min === undefined || min === \"\") ?  0 : min;\n    //     max = (max === undefined || max === \"\") ?  Infinity : max;\n    //\n    //     return (cur_val >= min && cur_val <= max);\n    // };\n    //\n    // data_price_multiplication = (price) => {\n    //     if (price && typeof price !== \"number\") {\n    //         let multiplication_price_max = price.slice(-1);\n    //\n    //         if (multiplication_price_max === \"k\") {\n    //             price = parseInt(price.slice(1)) * 1000;\n    //         } else if (multiplication_price_max === \"M\") {\n    //             price = parseInt(price.slice(1)) * 1000000;\n    //         }\n    //     }\n    //     return price;\n    // };\n\n    // updateGalleryItems  = (data) => {\n    //         this.setState({\n    //             filtered: data,\n    //         }, () => this.getdata());\n    //     console.log(data);\n    //\n\n        // let {cities, apartments, } = this.state;\n        // let temp = this.state.apartments;\n        // let new_apartments = [];\n        //\n        //\n        // new_apartments = temp.filter(function (apartment) {\n        //                 const city = cities.find(city => city.id === apartment.cityId);\n        //                 const city_name = city.label;\n        //                 if (city_name.toLowerCase().includes(data.city.toLowerCase())){ return apartment}\n        //             });\n        //\n        // if (data.price_min || data.price_max) {\n        //     data.price_min = this.data_price_multiplication(data.price_min);\n        //     data.price_max = this.data_price_multiplication(data.price_max);\n        //\n        //     if (data.price_max || data.price_min) {\n        //         new_apartments = new_apartments.filter(obj => this.checkRange(obj, data.price_min , data.price_max , \"price\"))\n        //     }\n        // }\n        // if (data.bed_min || data.bed_max) {\n        //     new_apartments = new_apartments.filter (obj => this.checkRange(obj, data.bed_min, data.bed_max, \"number_of_beds\"))\n        // }\n        // if (data.room_min || data.room_max) {\n        //     new_apartments = new_apartments.filter(obj => this.checkRange(obj, data.room_min, data.room_max, \"number_of_rooms\"))\n        // }\n        // if (data.no_filters){\n        //         new_apartments = temp;\n        // }\n\n        // this.setState({filtered:new_apartments})\n    // };\n\n\n    render() {\n        const { cities, filtered, apartments } = this.state;\n        const buildSquareDetails = () => {\n            return apartments.map((item, i) => {\n                return (\n                    <Card {...item} cities={cities} type={this.props.type} key={i}/>\n                )\n            })\n        };\n\n        return (\n            <div style={{overflow:\"hidden\"}}>\n                <div>\n                    <Filters updateGalleryItems={this.updateGalleryItems} filtered={this.state.filtered}/>\n                </div>\n\n                <div className={\"row m-0 d-flex justify-content-around\"}>\n                    {buildSquareDetails()}\n                </div>\n            </div>\n        )\n    }\n}\n\n\nexport default Gallery;\n"]},"metadata":{},"sourceType":"module"}