{"ast":null,"code":"var _jsxFileName = \"/Users/kristina/Desktop/experis/week_9/realtor/src/pages/search/gallery.jsx\";\nimport React from 'react';\nimport Card from \"../../components/card/card.jsx\";\nimport Filters from \"./filters\";\nimport axios from \"axios\";\n\nclass Gallery extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.checkRange = (value, min, max, label) => {\n      let cur_val = value[label];\n\n      if (label === 'price') {\n        cur_val = value[label] * 100000;\n      }\n\n      min = min === undefined || min === \"\" ? 0 : min;\n      max = max === undefined || max === \"\" ? Infinity : max;\n      return cur_val >= min && cur_val <= max;\n    };\n\n    this.data_price_multiplication = price => {\n      if (price && typeof price !== \"number\") {\n        let multiplication_price_max = price.slice(-1);\n\n        if (multiplication_price_max === \"k\") {\n          price = parseInt(price.slice(1)) * 1000;\n        } else if (multiplication_price_max === \"M\") {\n          price = parseInt(price.slice(1)) * 1000000;\n        }\n      }\n\n      return price;\n    };\n\n    this.updateGalleryItems = data => {\n      let _this$state = this.state,\n          cities = _this$state.cities,\n          apartments = _this$state.apartments;\n      let temp = this.state.apartments;\n      let new_apartments = [];\n      new_apartments = temp.filter(function (apartment) {\n        const city = cities.find(city => city.id === apartment.cityId);\n        const city_name = city.label;\n\n        if (city_name.toLowerCase().includes(data.city.toLowerCase())) {\n          return apartment;\n        }\n      });\n\n      if (data.price_min || data.price_max) {\n        data.price_min = this.data_price_multiplication(data.price_min);\n        data.price_max = this.data_price_multiplication(data.price_max);\n\n        if (data.price_max || data.price_min) {\n          new_apartments = new_apartments.filter(obj => this.checkRange(obj, data.price_min, data.price_max, \"price\"));\n        }\n      }\n\n      if (data.bed_min || data.bed_max) {\n        new_apartments = new_apartments.filter(obj => this.checkRange(obj, data.bed_min, data.bed_max, \"number_of_beds\"));\n      }\n\n      if (data.room_min || data.room_max) {\n        new_apartments = new_apartments.filter(obj => this.checkRange(obj, data.room_min, data.room_max, \"number_of_rooms\"));\n      }\n\n      if (data.no_filters) {\n        new_apartments = temp;\n      }\n\n      this.setState({\n        filtered: new_apartments\n      });\n    };\n\n    this.state = {\n      apartments: [],\n      filtered: this.props.apartments,\n      cities: this.props.cities\n    };\n  }\n\n  componentDidMount() {\n    this.getdata();\n  }\n\n  async getdata() {\n    const data = await axios.get(\"http://localhost:5000/apartments\");\n    this.setState({\n      apartments: data.apartments,\n      loading: false\n    });\n    console.log(this.state.apartments);\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          cities = _this$state2.cities,\n          filtered = _this$state2.filtered,\n          apartments = _this$state2.apartments;\n\n    const buildSquareDetails = () => {\n      return apartments.map((item, i) => {\n        return React.createElement(Card, Object.assign({}, item, {\n          cities: cities,\n          type: this.props.type,\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }));\n      });\n    };\n\n    return React.createElement(\"div\", {\n      style: {\n        overflow: \"hidden\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(Filters, {\n      updateGalleryItems: this.updateGalleryItems,\n      filtered: this.state.filtered,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"row m-0 d-flex justify-content-around\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, buildSquareDetails()));\n  }\n\n}\n\nexport default Gallery;","map":{"version":3,"sources":["/Users/kristina/Desktop/experis/week_9/realtor/src/pages/search/gallery.jsx"],"names":["React","Card","Filters","axios","Gallery","Component","constructor","props","checkRange","value","min","max","label","cur_val","undefined","Infinity","data_price_multiplication","price","multiplication_price_max","slice","parseInt","updateGalleryItems","data","state","cities","apartments","temp","new_apartments","filter","apartment","city","find","id","cityId","city_name","toLowerCase","includes","price_min","price_max","obj","bed_min","bed_max","room_min","room_max","no_filters","setState","filtered","componentDidMount","getdata","get","loading","console","log","render","buildSquareDetails","map","item","i","type","overflow"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Card from \"../../components/card/card.jsx\";\nimport Filters from \"./filters\";\nimport axios from \"axios\";\n\nclass Gallery extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            apartments: [],\n            filtered: this.props.apartments,\n            cities: this.props.cities\n        }\n    };\n\n    componentDidMount(){\n        this.getdata();\n    }\n\n    async getdata(){\n        const data = await axios.get(`http://localhost:5000/apartments`);\n        this.setState({apartments:data.apartments,loading:false});\n        console.log(this.state.apartments)\n    }\n\n    checkRange = ( value, min, max, label) => {\n        let cur_val = value[label];\n        if (label === 'price') {\n            cur_val = value[label]*100000;\n        }\n        min = (min === undefined || min === \"\") ?  0 : min;\n        max = (max === undefined || max === \"\") ?  Infinity : max;\n\n        return (cur_val >= min && cur_val <= max);\n    };\n\n    data_price_multiplication = (price) => {\n        if (price && typeof price !== \"number\") {\n            let multiplication_price_max = price.slice(-1);\n\n            if (multiplication_price_max === \"k\") {\n                price = parseInt(price.slice(1)) * 1000;\n            } else if (multiplication_price_max === \"M\") {\n                price = parseInt(price.slice(1)) * 1000000;\n            }\n        }\n        return price;\n    };\n\n    updateGalleryItems  = (data) => {\n\n        let {cities, apartments, } = this.state;\n        let temp = this.state.apartments;\n        let new_apartments = [];\n\n\n        new_apartments = temp.filter(function (apartment) {\n                        const city = cities.find(city => city.id === apartment.cityId);\n                        const city_name = city.label;\n                        if (city_name.toLowerCase().includes(data.city.toLowerCase())){ return apartment}\n                    });\n\n        if (data.price_min || data.price_max) {\n            data.price_min = this.data_price_multiplication(data.price_min);\n            data.price_max = this.data_price_multiplication(data.price_max);\n\n            if (data.price_max || data.price_min) {\n                new_apartments = new_apartments.filter(obj => this.checkRange(obj, data.price_min , data.price_max , \"price\"))\n            }\n        }\n        if (data.bed_min || data.bed_max) {\n            new_apartments = new_apartments.filter (obj => this.checkRange(obj, data.bed_min, data.bed_max, \"number_of_beds\"))\n        }\n        if (data.room_min || data.room_max) {\n            new_apartments = new_apartments.filter(obj => this.checkRange(obj, data.room_min, data.room_max, \"number_of_rooms\"))\n        }\n        if (data.no_filters){\n                new_apartments = temp;\n        }\n\n        this.setState({filtered:new_apartments})\n    };\n\n\n    render() {\n        const { cities, filtered, apartments } = this.state;\n        const buildSquareDetails = () => {\n            return apartments.map((item, i) => {\n                return (\n                    <Card {...item} cities={cities} type={this.props.type} key={i}/>\n                )\n            })\n        };\n\n        return (\n            <div style={{overflow:\"hidden\"}}>\n                <div>\n                    <Filters updateGalleryItems={this.updateGalleryItems} filtered={this.state.filtered}/>\n                </div>\n\n                <div className={\"row m-0 d-flex justify-content-around\"}>\n                    {buildSquareDetails()}\n                </div>\n            </div>\n        )\n    }\n}\n\n\nexport default Gallery;\n"]},"metadata":{},"sourceType":"module"}