{"ast":null,"code":"import _classCallCheck from\"/Users/kristina/Desktop/experis/week_9/img_page/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kristina/Desktop/experis/week_9/img_page/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/kristina/Desktop/experis/week_9/img_page/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/kristina/Desktop/experis/week_9/img_page/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/kristina/Desktop/experis/week_9/img_page/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Card from\"./card.jsx\";import Filters from\"./filters\";var Gallery=/*#__PURE__*/function(_React$Component){_inherits(Gallery,_React$Component);function Gallery(props){var _this;_classCallCheck(this,Gallery);_this=_possibleConstructorReturn(this,_getPrototypeOf(Gallery).call(this,props));_this.checkRange=function(value,min,max,label){var cur_val=value[label];if(label==='price'){cur_val=value[label]*100000;}min=min===undefined||min===\"\"?0:min;max=max===undefined||max===\"\"?Infinity:max;return cur_val>=min&&cur_val<=max;};_this.data_price_multiplication=function(price){if(price&&typeof price!==\"number\"){var multiplication_price_max=price.slice(-1);if(multiplication_price_max===\"k\"){price=parseInt(price.slice(1))*1000;}else if(multiplication_price_max===\"M\"){price=parseInt(price.slice(1))*1000000;}}return price;};_this.updateGalleryItems=function(data){_this.setState({filtered:_this.props.apartments});console.log(_this.state.filtered);var _this$state=_this.state,filtered=_this$state.filtered,cities=_this$state.cities,apartments=_this$state.apartments;if(data.city){console.log(\"in data city\");_this.setState({filtered:filtered.filter(function(apartment){var city=cities.find(function(city){return city.id===apartment.cityId;});var city_name=city.label;if(city_name.toLowerCase().includes(data.city.toLowerCase())){return filtered;}})});}if(data.price_min||data.price_max){data.price_min=_this.data_price_multiplication(data.price_min);data.price_max=_this.data_price_multiplication(data.price_max);if(data.price_max||data.price_min){_this.setState({filtered:filtered.filter(function(obj){return _this.checkRange(obj,data.price_min,data.price_max,\"price\");})});}}if(data.bed_min||data.bed_max){_this.setState({filtered:filtered.filter(function(obj){return _this.checkRange(obj,data.bed_min,data.bed_max,\"number_of_beds\");})});}if(data.room_min||data.room_max){_this.setState({filtered:filtered.filter(function(obj){return _this.checkRange(obj,data.room_min,data.room_max,\"number_of_rooms\");})});}if(data.no_filters){_this.setState({filtered:apartments});}};_this.filtered_len_0=function(){var _this$state2=_this.state,filtered=_this$state2.filtered,apartments=_this$state2.apartments;if(filtered.length===0){alert(\"There are no apartments that match your search \\n (The apartments will appear without the filters)\");_this.setState({filtered:apartments});}};_this.state={apartments:_this.props.apartments,filtered:_this.props.apartments,cities:_this.props.cities};return _this;}_createClass(Gallery,[{key:\"render\",value:function render(){var _this2=this;this.filtered_len_0();var _this$state3=this.state,cities=_this$state3.cities,filtered=_this$state3.filtered;var buildSquareDetails=function buildSquareDetails(){return filtered.map(function(item,i){return React.createElement(Card,Object.assign({},item,{cities:cities,type:_this2.props.type,key:i}));});};return React.createElement(\"div\",{style:{overflow:\"hidden\"}},React.createElement(\"div\",null,React.createElement(Filters,{updateGalleryItems:this.updateGalleryItems,filtered:this.state.filtered})),React.createElement(\"div\",{className:\"row m-0 d-flex justify-content-around\"},buildSquareDetails()));}}]);return Gallery;}(React.Component);export default Gallery;","map":{"version":3,"sources":["/Users/kristina/Desktop/experis/week_9/img_page/src/components/search_page/gallery.jsx"],"names":["React","Card","Filters","Gallery","props","checkRange","value","min","max","label","cur_val","undefined","Infinity","data_price_multiplication","price","multiplication_price_max","slice","parseInt","updateGalleryItems","data","setState","filtered","apartments","console","log","state","cities","city","filter","apartment","find","id","cityId","city_name","toLowerCase","includes","price_min","price_max","obj","bed_min","bed_max","room_min","room_max","no_filters","filtered_len_0","length","alert","buildSquareDetails","map","item","i","type","overflow","Component"],"mappings":"wpBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,C,GAEMC,CAAAA,O,6EACF,iBAAYC,KAAZ,CAAmB,yCACf,yEAAMA,KAAN,GADe,MASnBC,UATmB,CASN,SAAEC,KAAF,CAASC,GAAT,CAAcC,GAAd,CAAmBC,KAAnB,CAA6B,CACtC,GAAIC,CAAAA,OAAO,CAAGJ,KAAK,CAACG,KAAD,CAAnB,CACA,GAAIA,KAAK,GAAK,OAAd,CAAuB,CACnBC,OAAO,CAAGJ,KAAK,CAACG,KAAD,CAAL,CAAa,MAAvB,CACH,CACDF,GAAG,CAAIA,GAAG,GAAKI,SAAR,EAAqBJ,GAAG,GAAK,EAA9B,CAAqC,CAArC,CAAyCA,GAA/C,CACAC,GAAG,CAAIA,GAAG,GAAKG,SAAR,EAAqBH,GAAG,GAAK,EAA9B,CAAqCI,QAArC,CAAgDJ,GAAtD,CAEA,MAAQE,CAAAA,OAAO,EAAIH,GAAX,EAAkBG,OAAO,EAAIF,GAArC,CACH,CAlBkB,OAoBnBK,yBApBmB,CAoBS,SAACC,KAAD,CAAW,CACnC,GAAIA,KAAK,EAAI,MAAOA,CAAAA,KAAP,GAAiB,QAA9B,CAAwC,CACpC,GAAIC,CAAAA,wBAAwB,CAAGD,KAAK,CAACE,KAAN,CAAY,CAAC,CAAb,CAA/B,CAEA,GAAID,wBAAwB,GAAK,GAAjC,CAAsC,CAClCD,KAAK,CAAGG,QAAQ,CAACH,KAAK,CAACE,KAAN,CAAY,CAAZ,CAAD,CAAR,CAA2B,IAAnC,CACH,CAFD,IAEO,IAAID,wBAAwB,GAAK,GAAjC,CAAsC,CACzCD,KAAK,CAAGG,QAAQ,CAACH,KAAK,CAACE,KAAN,CAAY,CAAZ,CAAD,CAAR,CAA2B,OAAnC,CACH,CACJ,CACD,MAAOF,CAAAA,KAAP,CACH,CA/BkB,OAiCnBI,kBAjCmB,CAiCG,SAACC,IAAD,CAAU,CAE5B,MAAKC,QAAL,CAAc,CACVC,QAAQ,CAAG,MAAKjB,KAAL,CAAWkB,UADZ,CAAd,EAEOC,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWJ,QAAvB,EAJqB,gBAMW,MAAKI,KANhB,CAMrBJ,QANqB,aAMrBA,QANqB,CAMXK,MANW,aAMXA,MANW,CAMHJ,UANG,aAMHA,UANG,CAQ5B,GAAIH,IAAI,CAACQ,IAAT,CAAe,CACXJ,OAAO,CAACC,GAAR,CAAY,cAAZ,EACA,MAAKJ,QAAL,CAAc,CACVC,QAAQ,CAAGA,QAAQ,CAACO,MAAT,CAAgB,SAAUC,SAAV,CAAqB,CAC5C,GAAMF,CAAAA,IAAI,CAAGD,MAAM,CAACI,IAAP,CAAY,SAAAH,IAAI,QAAIA,CAAAA,IAAI,CAACI,EAAL,GAAYF,SAAS,CAACG,MAA1B,EAAhB,CAAb,CACA,GAAMC,CAAAA,SAAS,CAAGN,IAAI,CAAClB,KAAvB,CACA,GAAIwB,SAAS,CAACC,WAAV,GAAwBC,QAAxB,CAAiChB,IAAI,CAACQ,IAAL,CAAUO,WAAV,EAAjC,CAAJ,CAA8D,CAAE,MAAOb,CAAAA,QAAP,CAAgB,CACnF,CAJU,CADD,CAAd,EAOH,CACD,GAAIF,IAAI,CAACiB,SAAL,EAAkBjB,IAAI,CAACkB,SAA3B,CAAsC,CAClClB,IAAI,CAACiB,SAAL,CAAiB,MAAKvB,yBAAL,CAA+BM,IAAI,CAACiB,SAApC,CAAjB,CACAjB,IAAI,CAACkB,SAAL,CAAiB,MAAKxB,yBAAL,CAA+BM,IAAI,CAACkB,SAApC,CAAjB,CAEA,GAAIlB,IAAI,CAACkB,SAAL,EAAkBlB,IAAI,CAACiB,SAA3B,CAAsC,CAClC,MAAKhB,QAAL,CAAc,CACVC,QAAQ,CAAGA,QAAQ,CAACO,MAAT,CAAgB,SAAAU,GAAG,QAAI,OAAKjC,UAAL,CAAgBiC,GAAhB,CAAqBnB,IAAI,CAACiB,SAA1B,CAAsCjB,IAAI,CAACkB,SAA3C,CAAuD,OAAvD,CAAJ,EAAnB,CADD,CAAd,EAGH,CACJ,CACD,GAAIlB,IAAI,CAACoB,OAAL,EAAgBpB,IAAI,CAACqB,OAAzB,CAAkC,CAC9B,MAAKpB,QAAL,CAAc,CACVC,QAAQ,CAAGA,QAAQ,CAACO,MAAT,CAAiB,SAAAU,GAAG,QAAI,OAAKjC,UAAL,CAAgBiC,GAAhB,CAAqBnB,IAAI,CAACoB,OAA1B,CAAmCpB,IAAI,CAACqB,OAAxC,CAAiD,gBAAjD,CAAJ,EAApB,CADD,CAAd,EAGH,CACD,GAAIrB,IAAI,CAACsB,QAAL,EAAiBtB,IAAI,CAACuB,QAA1B,CAAoC,CAChC,MAAKtB,QAAL,CAAc,CACVC,QAAQ,CAAGA,QAAQ,CAACO,MAAT,CAAgB,SAAAU,GAAG,QAAI,OAAKjC,UAAL,CAAgBiC,GAAhB,CAAqBnB,IAAI,CAACsB,QAA1B,CAAoCtB,IAAI,CAACuB,QAAzC,CAAmD,iBAAnD,CAAJ,EAAnB,CADD,CAAd,EAGH,CACD,GAAIvB,IAAI,CAACwB,UAAT,CAAoB,CAChB,MAAKvB,QAAL,CAAc,CACVC,QAAQ,CAAGC,UADD,CAAd,EAGH,CACJ,CA5EkB,OA8EnBsB,cA9EmB,CA8EF,UAAM,kBACa,MAAKnB,KADlB,CACZJ,QADY,cACZA,QADY,CACFC,UADE,cACFA,UADE,CAEnB,GAAID,QAAQ,CAACwB,MAAT,GAAoB,CAAxB,CAA0B,CACtBC,KAAK,CAAC,oGAAD,CAAL,CACA,MAAK1B,QAAL,CAAc,CACVC,QAAQ,CAAGC,UADD,CAAd,EAGH,CACJ,CAtFkB,CAEf,MAAKG,KAAL,CAAa,CACTH,UAAU,CAAE,MAAKlB,KAAL,CAAWkB,UADd,CAETD,QAAQ,CAAE,MAAKjB,KAAL,CAAWkB,UAFZ,CAGTI,MAAM,CAAE,MAAKtB,KAAL,CAAWsB,MAHV,CAAb,CAFe,aAOlB,C,2DAmFQ,iBACL,KAAKkB,cAAL,GADK,iBAEwB,KAAKnB,KAF7B,CAEGC,MAFH,cAEGA,MAFH,CAEWL,QAFX,cAEWA,QAFX,CAIL,GAAM0B,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAC7B,MAAO1B,CAAAA,QAAQ,CAAC2B,GAAT,CAAa,SAACC,IAAD,CAAOC,CAAP,CAAa,CAC7B,MACI,qBAAC,IAAD,kBAAUD,IAAV,EAAgB,MAAM,CAAEvB,MAAxB,CAAgC,IAAI,CAAE,MAAI,CAACtB,KAAL,CAAW+C,IAAjD,CAAuD,GAAG,CAAED,CAA5D,GADJ,CAGH,CAJM,CAAP,CAKH,CAND,CAQA,MACI,4BAAK,KAAK,CAAE,CAACE,QAAQ,CAAC,QAAV,CAAZ,EACI,+BACI,oBAAC,OAAD,EAAS,kBAAkB,CAAE,KAAKlC,kBAAlC,CAAsD,QAAQ,CAAE,KAAKO,KAAL,CAAWJ,QAA3E,EADJ,CADJ,CAKI,2BAAK,SAAS,CAAE,uCAAhB,EACK0B,kBAAkB,EADvB,CALJ,CADJ,CAWH,C,qBAlHiB/C,KAAK,CAACqD,S,EAsH5B,cAAelD,CAAAA,OAAf","sourcesContent":["import React from 'react';\nimport Card from \"./card.jsx\";\nimport Filters from \"./filters\";\n\nclass Gallery extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            apartments: this.props.apartments,\n            filtered: this.props.apartments,\n            cities: this.props.cities\n        }\n    };\n\n    checkRange = ( value, min, max, label) => {\n        let cur_val = value[label];\n        if (label === 'price') {\n            cur_val = value[label]*100000;\n        }\n        min = (min === undefined || min === \"\") ?  0 : min;\n        max = (max === undefined || max === \"\") ?  Infinity : max;\n\n        return (cur_val >= min && cur_val <= max);\n    };\n\n    data_price_multiplication = (price) => {\n        if (price && typeof price !== \"number\") {\n            let multiplication_price_max = price.slice(-1);\n\n            if (multiplication_price_max === \"k\") {\n                price = parseInt(price.slice(1)) * 1000;\n            } else if (multiplication_price_max === \"M\") {\n                price = parseInt(price.slice(1)) * 1000000;\n            }\n        }\n        return price;\n    };\n\n    updateGalleryItems  = (data) => {\n\n        this.setState({\n            filtered : this.props.apartments,\n        });    console.log(this.state.filtered);\n\n        const {filtered, cities, apartments} = this.state;\n\n        if (data.city) {\n            console.log(\"in data city\");\n            this.setState({\n                filtered : filtered.filter(function (apartment) {\n                    const city = cities.find(city => city.id === apartment.cityId);\n                    const city_name = city.label;\n                    if (city_name.toLowerCase().includes(data.city.toLowerCase())){ return filtered}\n                })\n            })\n        }\n        if (data.price_min || data.price_max) {\n            data.price_min = this.data_price_multiplication(data.price_min);\n            data.price_max = this.data_price_multiplication(data.price_max);\n\n            if (data.price_max || data.price_min) {\n                this.setState({\n                    filtered : filtered.filter(obj => this.checkRange(obj, data.price_min , data.price_max , \"price\"))\n                });\n            }\n        }\n        if (data.bed_min || data.bed_max) {\n            this.setState({\n                filtered : filtered.filter (obj => this.checkRange(obj, data.bed_min, data.bed_max, \"number_of_beds\"))\n            });\n        }\n        if (data.room_min || data.room_max) {\n            this.setState({\n                filtered : filtered.filter(obj => this.checkRange(obj, data.room_min, data.room_max, \"number_of_rooms\"))\n            });\n        }\n        if (data.no_filters){\n            this.setState({\n                filtered : apartments,\n            });\n        }\n    };\n\n    filtered_len_0 = () => {\n        const {filtered, apartments } = this.state;\n        if (filtered.length === 0){\n            alert(\"There are no apartments that match your search \\n (The apartments will appear without the filters)\");\n            this.setState({\n                filtered : apartments,\n            });\n        }\n    };\n\n\n\n    render() {\n        this.filtered_len_0();\n        const { cities, filtered } = this.state;\n\n        const buildSquareDetails = () => {\n            return filtered.map((item, i) => {\n                return (\n                    <Card {...item} cities={cities} type={this.props.type} key={i}/>\n                )\n            })\n        };\n\n        return (\n            <div style={{overflow:\"hidden\"}}>\n                <div>\n                    <Filters updateGalleryItems={this.updateGalleryItems} filtered={this.state.filtered}/>\n                </div>\n\n                <div className={\"row m-0 d-flex justify-content-around\"}>\n                    {buildSquareDetails()}\n                </div>\n            </div>\n        )\n    }\n}\n\n\nexport default Gallery;\n"]},"metadata":{},"sourceType":"module"}