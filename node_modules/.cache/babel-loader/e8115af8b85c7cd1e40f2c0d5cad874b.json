{"ast":null,"code":"var _jsxFileName = \"/Users/kristina/Desktop/experis/week_9/img_page/src/components/search_page/gallery.jsx\";\nimport React from 'react';\nimport Card from \"./card.jsx\";\nimport Filters from \"./filters\";\n\nclass Gallery extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.checkRange = (value, min, max, label) => {\n      let cur_val = value[label];\n\n      if (label === 'price') {\n        cur_val = value[label] * 100000;\n      }\n\n      min = min === undefined || min === \"\" ? 0 : min;\n      max = max === undefined || max === \"\" ? Infinity : max;\n      return cur_val >= min && cur_val <= max;\n    };\n\n    this.data_price_multiplication = price => {\n      if (price && typeof price !== \"number\") {\n        let multiplication_price_max = price.slice(-1);\n\n        if (multiplication_price_max === \"k\") {\n          price = parseInt(price.slice(1)) * 1000;\n        } else if (multiplication_price_max === \"M\") {\n          price = parseInt(price.slice(1)) * 1000000;\n        }\n      }\n\n      return price;\n    };\n\n    this.updateGalleryItems = data => {\n      const data_new = {\n        city: data.city,\n        price_min: data.price_min,\n        price_max: data.price_max,\n        bed_min: data.bed_min,\n        bed_max: data.bed_max,\n        room_min: data.room_min,\n        room_max: data.room_max,\n        no_filters: data.no_filters\n      };\n      this.setState({\n        filtered: this.props.apartments\n      });\n      console.log(data_new.price_min);\n      const _this$state = this.state,\n            filtered = _this$state.filtered,\n            cities = _this$state.cities,\n            apartments = _this$state.apartments;\n\n      if (data_new.city) {\n        console.log(this.state.filtered);\n        this.setState({\n          filtered: filtered.filter(function (apartment) {\n            const city = cities.find(city => city.id === apartment.cityId);\n            const city_name = city.label;\n\n            if (city_name.toLowerCase().includes(data.city.toLowerCase())) {\n              return filtered;\n            }\n          })\n        });\n      }\n\n      if (data_new.price_min || data_new.price_max) {\n        data_new.price_min = this.data_price_multiplication(data_new.price_min);\n        data_new.price_max = this.data_price_multiplication(data_new.price_max);\n\n        if (data_new.price_max || data_new.price_min) {\n          this.setState({\n            filtered: filtered.filter(obj => this.checkRange(obj, data_new.price_min, data_new.price_max, \"price\"))\n          });\n        }\n      }\n\n      if (data_new.bed_min || data_new.bed_max) {\n        this.setState({\n          filtered: filtered.filter(obj => this.checkRange(obj, data_new.bed_min, data_new.bed_max, \"number_of_beds\"))\n        });\n      }\n\n      if (data_new.room_min || data_new.room_max) {\n        this.setState({\n          filtered: filtered.filter(obj => this.checkRange(obj, data.room_min, data.room_max, \"number_of_rooms\"))\n        });\n      }\n\n      if (data.no_filters) {\n        this.setState({\n          filtered: apartments\n        });\n      }\n    };\n\n    this.filtered_len_0 = () => {\n      const _this$state2 = this.state,\n            filtered = _this$state2.filtered,\n            apartments = _this$state2.apartments;\n\n      if (filtered.length === 0) {\n        alert(\"There are no apartments that match your search \\n (The apartments will appear without the filters)\");\n        this.setState({\n          filtered: apartments\n        });\n      }\n    };\n\n    this.state = {\n      apartments: this.props.apartments,\n      filtered: this.props.apartments,\n      cities: this.props.cities\n    };\n  }\n\n  render() {\n    this.filtered_len_0();\n    const _this$state3 = this.state,\n          cities = _this$state3.cities,\n          filtered = _this$state3.filtered;\n\n    const buildSquareDetails = () => {\n      return filtered.map((item, i) => {\n        return React.createElement(Card, Object.assign({}, item, {\n          cities: cities,\n          type: this.props.type,\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }));\n      });\n    };\n\n    return React.createElement(\"div\", {\n      style: {\n        overflow: \"hidden\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(Filters, {\n      updateGalleryItems: this.updateGalleryItems,\n      filtered: this.state.filtered,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"row m-0 d-flex justify-content-around\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, buildSquareDetails()));\n  }\n\n}\n\nexport default Gallery;","map":{"version":3,"sources":["/Users/kristina/Desktop/experis/week_9/img_page/src/components/search_page/gallery.jsx"],"names":["React","Card","Filters","Gallery","Component","constructor","props","checkRange","value","min","max","label","cur_val","undefined","Infinity","data_price_multiplication","price","multiplication_price_max","slice","parseInt","updateGalleryItems","data","data_new","city","price_min","price_max","bed_min","bed_max","room_min","room_max","no_filters","setState","filtered","apartments","console","log","state","cities","filter","apartment","find","id","cityId","city_name","toLowerCase","includes","obj","filtered_len_0","length","alert","render","buildSquareDetails","map","item","i","type","overflow"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Card from \"./card.jsx\";\nimport Filters from \"./filters\";\n\nclass Gallery extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            apartments: this.props.apartments,\n            filtered: this.props.apartments,\n            cities: this.props.cities\n        }\n    };\n\n    checkRange = ( value, min, max, label) => {\n        let cur_val = value[label];\n        if (label === 'price') {\n            cur_val = value[label]*100000;\n        }\n        min = (min === undefined || min === \"\") ?  0 : min;\n        max = (max === undefined || max === \"\") ?  Infinity : max;\n\n        return (cur_val >= min && cur_val <= max);\n    };\n\n    data_price_multiplication = (price) => {\n        if (price && typeof price !== \"number\") {\n            let multiplication_price_max = price.slice(-1);\n\n            if (multiplication_price_max === \"k\") {\n                price = parseInt(price.slice(1)) * 1000;\n            } else if (multiplication_price_max === \"M\") {\n                price = parseInt(price.slice(1)) * 1000000;\n            }\n        }\n        return price;\n    };\n\n    updateGalleryItems  = (data) => {\n\n        const data_new = {\n            city: data.city,\n            price_min: data.price_min,\n            price_max: data.price_max,\n            bed_min: data.bed_min,\n            bed_max: data.bed_max,\n            room_min: data.room_min,\n            room_max: data.room_max,\n            no_filters: data.no_filters,\n        };\n\n        this.setState({\n            filtered : this.props.apartments,\n        });    console.log(data_new.price_min);\n\n        const {filtered, cities, apartments} = this.state;\n\n        if (data_new.city) {\n            console.log(this.state.filtered);\n            this.setState({\n                filtered : filtered.filter(function (apartment) {\n                    const city = cities.find(city => city.id === apartment.cityId);\n                    const city_name = city.label;\n                    if (city_name.toLowerCase().includes(data.city.toLowerCase())){ return filtered}\n                })\n            })\n        }\n        if (data_new.price_min || data_new.price_max) {\n            data_new.price_min = this.data_price_multiplication(data_new.price_min);\n            data_new.price_max = this.data_price_multiplication(data_new.price_max);\n\n            if (data_new.price_max || data_new.price_min) {\n                this.setState({\n                    filtered : filtered.filter(obj => this.checkRange(obj, data_new.price_min , data_new.price_max , \"price\"))\n                });\n            }\n        }\n        if (data_new.bed_min || data_new.bed_max) {\n            this.setState({\n                filtered : filtered.filter (obj => this.checkRange(obj, data_new.bed_min, data_new.bed_max, \"number_of_beds\"))\n            });\n        }\n        if (data_new.room_min || data_new.room_max) {\n            this.setState({\n                filtered : filtered.filter(obj => this.checkRange(obj, data.room_min, data.room_max, \"number_of_rooms\"))\n            });\n        }\n        if (data.no_filters){\n            this.setState({\n                filtered : apartments,\n            });\n        }\n    };\n\n    filtered_len_0 = () => {\n        const {filtered, apartments } = this.state;\n        if (filtered.length === 0){\n            alert(\"There are no apartments that match your search \\n (The apartments will appear without the filters)\");\n            this.setState({\n                filtered : apartments,\n            });\n        }\n    };\n\n\n\n    render() {\n        this.filtered_len_0();\n        const { cities, filtered } = this.state;\n\n        const buildSquareDetails = () => {\n            return filtered.map((item, i) => {\n                return (\n                    <Card {...item} cities={cities} type={this.props.type} key={i}/>\n                )\n            })\n        };\n\n        return (\n            <div style={{overflow:\"hidden\"}}>\n                <div>\n                    <Filters updateGalleryItems={this.updateGalleryItems} filtered={this.state.filtered}/>\n                </div>\n\n                <div className={\"row m-0 d-flex justify-content-around\"}>\n                    {buildSquareDetails()}\n                </div>\n            </div>\n        )\n    }\n}\n\n\nexport default Gallery;\n"]},"metadata":{},"sourceType":"module"}